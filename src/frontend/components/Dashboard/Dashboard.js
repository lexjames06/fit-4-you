import React, { useState, useEffect } from 'react'
import { Link, withRouter } from 'react-router-dom'
import logo from '../../assets/svg/logo-white.svg'
import BackButton from '../BackButton/BackButton'
import firebase from '../firebase'
import './Dashboard.css'

function Dashboard(props) {

    if(!firebase.getCurrentUsername()) {
        alert('Please log in first');
        props.history.replace('/login');
        return null;
    };

    async function logout() {
        await firebase.logout();
        props.history.push('/');
    }

    return (
        <div className='App dashboard'>
            <div className='welcome'><h1>Hello {firebase.getCurrentUsername()}</h1></div>
            <button
                type='submit'
                onClick={logout}
                className='button solid button-main'
            >
                <h1>Log out</h1>
            </button>
            <ToolBar />
        </div>
    );
}

function ToolBar() {
    const [toolSelected, setToolSelected] = useState('workout');

    return (
    <div className='tool-bar'>
        <svg 
            className={`tool${toolSelected === 'workout' ? ' selected' : ''}`}
            onClick={() => setToolSelected('workout')}
            width="464px"
            height="288px" 
            viewBox="0 0 464 288">
            <path class="st0" d="M93,288c-0.8-1.4-2.3-1.2-3.5-1.7c-5.9-2.8-8.7-7.5-9.3-13.8c-0.1-1.5-0.1-3-0.1-4.5c0-82.8,0-165.6,0-248.5
                c0-1.3-0.1-2.7,0-4c0.6-6.2,3.5-11,9.3-13.8C90.7,1.2,92.3,1.4,93,0c2,0,4,0,6,0c0.5,1,1.7,1,2.5,1.4c6.6,2.9,10,8,10.3,15.2
                c0,1.2,0,2.3,0,3.5c0,82.6,0,165.3,0,247.9c0,1.2,0,2.3,0,3.5c-0.3,7.1-3.5,12.4-10.2,15.2c-0.9,0.4-2,0.3-2.5,1.4
                C97,288,95,288,93,288z"/>
            <path class="st0" d="M371,0c0.5,1,1.7,1,2.5,1.4c6.6,2.9,10,8,10.3,15.2c0,1.2,0,2.3,0,3.5c0,82.6,0,165.3,0,247.9
                c0,1.2,0,2.3,0,3.5c-0.3,7.1-3.5,12.4-10.2,15.2c-0.9,0.4-2,0.3-2.5,1.4c-2,0-4,0-6,0c-0.8-1.4-2.3-1.2-3.5-1.7
                c-5.9-2.8-8.7-7.5-9.3-13.8c-0.1-1.5-0.1-3-0.1-4.5c0-82.8,0-165.6,0-248.5c0-1,0-2,0-3c0.3-7.2,3.6-12.3,10.3-15.2
                c0.9-0.4,2-0.3,2.5-1.4C367,0,369,0,371,0z"/>
            <path class="st0" d="M0,141c0.7-0.3,0.9-0.9,1.1-1.6c2.1-6.8,7.2-10,13.8-11.3c1.1,3.4,1.4,24.5,0.4,31.7c-5.6-1-10.3-3.1-13.2-8.5
                C1.4,149.9,1.6,148,0,147C0,145,0,143,0,141z"/>
            <path class="st0" d="M464,147c-1.5,0.9-1.2,2.6-1.9,3.9c-2.9,5.5-7.4,8.2-13.7,8.7c0-10.5,0-20.8,0-31.3c6.3,0.5,10.8,3.3,13.7,8.7
                c0.7,1.3,0.4,3.1,1.9,3.9C464,143,464,145,464,147z"/>
            <path class="st0" d="M335.6,128.4c0,10.5,0,20.7,0,31.2c-69.1,0-138,0-207.2,0c0-10.5,0-20.7,0-31.2
                C197.5,128.4,266.5,128.4,335.6,128.4z"/>
            <path class="st0" d="M400.2,143.5c0-33.5,0-67,0-100.4c0-2.2-0.1-4.3,0.5-6.4c2.1-7.7,9.2-13.1,16.6-12.3c7.6,0.8,13.8,7,14.5,14.9
                c0.1,1.3,0.1,2.7,0.1,4c0,67.3,0,134.6,0,201.9c0,1.7,0.1,3.4-0.2,5c-1.3,8.2-8.6,14.5-16.4,13.7c-7.7-0.7-14.1-5.6-15-15.3
                c-0.1-1.5,0-3,0-4.5C400.2,210.4,400.2,176.9,400.2,143.5z"/>
            <path class="st0" d="M32.2,143.5c0-33.5,0-67,0-100.4c0-2.2-0.1-4.3,0.5-6.4c2.1-7.7,9.2-13,16.6-12.3c7.6,0.8,13.8,7,14.5,14.9
                c0.1,1.3,0.1,2.7,0.1,4c0,67.3,0,134.6,0,201.9c0,1.7,0.1,3.4-0.2,5c-1.3,8.2-8.6,14.5-16.4,13.7c-7.7-0.7-14.1-5.6-15-15.3
                c-0.1-1.5,0-3,0-4.5C32.2,210.4,32.2,176.9,32.2,143.5z"/>
        </svg>
        <svg 
            className={`tool${toolSelected === 'schedule' ? ' selected' : ''}`}
            onClick={() => setToolSelected('schedule')}
            width="24px"
            height="24px" 
            viewBox="0 0 24 24">
            <path d="M24,2v22H0V2h3v1c0,1.1,0.9,2,2,2s2-0.9,2-2V2h10v1c0,1.1,0.9,2,2,2s2-0.9,2-2V2H24z M22,8H2v14h20V8z M20,1
                c0-0.6-0.4-1-1-1s-1,0.4-1,1v2c0,0.6,0.4,1,1,1s1-0.4,1-1V1z M6,3c0,0.6-0.4,1-1,1S4,3.6,4,3V1c0-0.6,0.4-1,1-1s1,0.4,1,1V3z
                M12.7,16.5c0-0.8-0.4-1.4-1.1-1.7c0.5-0.3,0.8-0.8,0.8-1.5c0-1.3-1.3-2.1-2.6-2.1c-1.5,0-2.6,0.9-2.7,2.8h1.6c0-0.8,0.3-1.3,1-1.3
                c0.4,0,0.9,0.3,0.9,0.9c0,0.8-0.8,0.9-1.6,0.8v1.3c1.1,0,1.7,0.1,1.7,1c0,0.7-0.5,1-1.1,1c-0.8,0-1.2-0.6-1.2-1.5H7
                C7,18,8.1,19,9.8,19C11.4,19,12.7,18.1,12.7,16.5z M17,19v-7.7h-1.4c-0.2,1.2-1,1.5-2.2,1.5v1.3h1.9V19H17z"/>
        </svg>
        <svg 
            className='tool'
            id='logo'
            width="583.5px"
            height="539.2px" 
            viewBox="0 0 583.5 539.2">
            <path class="st0" d="M264,539.2c-5.3-2.7-11.1-1-16.6-2.3c-7.8-1.8-15.6-3.3-22.9-6.6c-2-0.9-3.8-2-5.5-3.3c-5.2-3.9-6.1-6.7-4-12.8
                c18.2-51.9,36.5-103.9,54.8-155.8c0.8-2.1,2.1-4.2,1.5-6.7c-2-1.1-4.2-0.6-6.3-0.6c-80.9,0-161.8,0-242.7,0c-2.7,0-5.3-0.1-7.9-0.7
                C1,347.5-2.5,338.7,1.7,325.8c13.9-42.6,41.7-75.9,72.1-106.9c83.7-85.6,182.2-148.8,294.7-189.8c30.3-11,61.3-19.3,93.2-24.2
                c14.9-2.3,29.9-3.6,45-4.5c13.8-0.8,27.6,0,41.3,0.3c6.9,0.2,13.9,1,20.7,2.3c7.2,1.4,12.7,5.7,14.2,13.1c1.6,8.1,0,15.6-7.5,20.7
                c-5.8,4-12.2,6.5-19,6.7c-37.2,1.4-72.2,11.9-106.6,24.8c-90.5,33.9-173.2,81.9-248.5,142.4c-26.8,21.5-52.1,44.5-73.8,71.4
                c-5.5,6.9-10.7,14-15.3,21.5c-0.9,1.5-2.3,2.9-1.9,4.9c1.6,1.1,3.3,0.6,4.9,0.6c55.6,0,111.2,0,166.8,0.1c4.1,0,5.8-1.3,7.2-5
                c20.2-55.8,41.1-111.4,60.5-167.5c4.2-12.1,11.4-16.8,22-18.9c21.9-4.4,43.5-3.6,64.8,3.6c2.2,0.7,4.3,1.8,6.3,2.9
                c7.2,4.1,8.7,8.1,5.9,16.1c-45.2,126.3-90.4,252.7-135.5,379c-2.7,7.5-7.5,12-14.6,14.4c-6.9,2.3-14,4-21.4,4.1
                c-1.8,0-3.7-0.1-5.2,1.4C269.3,539.2,266.7,539.2,264,539.2z"/>
        </svg>
        <svg 
            className={`tool${toolSelected === 'diet' ? ' selected' : ''}`}
            onClick={() => setToolSelected('diet')}
            width="24px"
            height="24px" 
            viewBox="0 0 24 24">
            <path class="st0" d="M11.4,12.4l1.9-2.3c0.4-0.5,0.2-1-0.1-2.2c-0.2-0.9,0-1.9,0.6-2.5C15.6,3.6,19.1,0,19.1,0l0.5,0.4l-3.7,4.7
                l0.8,0.6l3.9-4.6l0.5,0.4l-3.6,4.8L18.3,7l3.9-4.6l0.4,0.3l-3.5,4.9l0.8,0.6l3.7-4.7L24,3.8c0,0-2.5,4.4-3.9,6.5
                c-0.5,0.8-1.4,1.2-2.3,1.2c-1.2,0-1.7-0.1-2.1,0.5l-2.3,2.8c2.4,3,4.6,5.5,5.6,6.8c0.8,1,0.1,2.4-1.2,2.4c-0.4,0-0.9-0.2-1.2-0.6
                L8.2,13.4c0,0-0.9,0.7-1.9,1.5C3.1,9.7,0,3.2,0,0.9C0,0.8,0,0,0.7,0C1,0,1.2,0.1,1.4,0.3C1.9,1,6.8,6.9,11.4,12.4 M8.5,16l2,2.4
                l-4.1,5.1C6,23.8,5.6,24,5.1,24c-1.2,0-2-1.4-1.2-2.4L8.5,16z"/>
        </svg>
        <svg 
            className={`tool${toolSelected === 'evaluation' ? ' selected' : ''}`}
            onClick={() => setToolSelected('evaluation')}
            width="24px"
            height="20px" 
            viewBox="0 0 24 20">
            <path d="M24,1.9l-6,1.2l1.7,1.7l-5.4,5.4l-3-3L4,14.4l1.4,1.4l5.9-5.8l3,3l6.8-6.8l1.7,1.7L24,1.9z M24,18v2H0V0h2v18H24z"/>
        </svg>
    </div>
    );
}

export default withRouter(Dashboard);